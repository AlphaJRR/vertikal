<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Vertikal Master 12.28</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        /* iOS RESET & OPTIMIZATIONS */
        body { 
            background-color: #000; 
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent; 
            overscroll-behavior-y: none;
        }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        .app-gradient { background: linear-gradient(to bottom, #000000 0%, #0f172a 100%); }
        .brand-gradient { background: linear-gradient(135deg, #3B82F6, #9333EA); }
        .gold-gradient { background: linear-gradient(135deg, #FFD700, #FDB931); }
        .glass-panel { background: rgba(30, 30, 30, 0.6); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.1); }
        
        /* 120Hz GPU ACCELERATION */
        .gpu-accelerated {
            transform: translateZ(0);
            will-change: transform, opacity;
            backface-visibility: hidden;
        }

        /* APPLE SPRING ANIMATIONS */
        @keyframes slideUpSpring { 
            0% { transform: translateY(100%); opacity: 0; } 
            100% { transform: translateY(0); opacity: 1; } 
        }
        .animate-spring-up { 
            animation: slideUpSpring 0.5s cubic-bezier(0.19, 1, 0.22, 1) forwards; 
        }

        @keyframes scaleInSpring {
            0% { transform: scale(0.9); opacity: 0; }
            50% { transform: scale(1.02); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
        .animate-pop { animation: scaleInSpring 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }

        /* DANMAKU */
        @keyframes danmaku { 
            0% { transform: translateX(100%); left: 100%; } 
            100% { transform: translateX(-150%); left: 0; } 
        }
        .animate-danmaku { 
            animation-name: danmaku; 
            animation-timing-function: linear; 
            animation-iteration-count: infinite; 
            white-space: nowrap;
            position: absolute;
            will-change: transform;
        }
        
        /* HYPE ANIMATION */
        @keyframes pulse-purple {
            0% { box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.7); }
            70% { box-shadow: 0 0 0 6px rgba(147, 51, 234, 0); }
            100% { box-shadow: 0 0 0 0 rgba(147, 51, 234, 0); }
        }
        .animate-hype { animation: pulse-purple 2s infinite; }
        
        /* TITANIUM SHINE */
        @keyframes shine { 0% { background-position: 200% center; } 100% { background-position: -200% center; } }
        .animate-shine { background: linear-gradient(to right, #94a3b8 20%, #ffffff 50%, #94a3b8 80%); background-size: 200% auto; color: transparent; background-clip: text; -webkit-background-clip: text; animation: shine 3s linear infinite; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        // --- HAPTIC ENGINE (Web Bridge) ---
        const triggerHaptic = (type = 'light') => {
            if (navigator.vibrate) {
                if (type === 'light') navigator.vibrate(10);
                if (type === 'medium') navigator.vibrate(40);
                if (type === 'heavy') navigator.vibrate([50, 30, 50]);
            }
        };

        // --- ASSETS ---
        const IMG_HERO = "https://images.unsplash.com/photo-1626814026160-2237a95fc5a0?q=80&w=800&auto=format&fit=crop"; 
        const IMG_BASES = "https://images.unsplash.com/photo-1517836357463-d25dfeac3438?q=80&w=800&auto=format&fit=crop"; 
        const IMG_BURGERS = "https://images.unsplash.com/photo-1568901346375-23c9450c58cd?q=80&w=800&auto=format&fit=crop"; 
        const IMG_NATURE = "https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?q=80&w=400&auto=format&fit=crop";
        const IMG_TEXTURE = "https://images.unsplash.com/photo-1550684848-fac1c5b4e853?q=80&w=400&auto=format&fit=crop";
        const VIDEO_TRAILER = "https://assets.mixkit.co/videos/preview/mixkit-athlete-working-out-with-heavy-ropes-in-the-gym-43750-large.mp4"; 
        
        // --- NETWORK LOGOS ---
        const LOGO_ALPHA = "https://www.dropbox.com/scl/fi/4edlkaew0pq5xwjgc63p1/IMG_2737.JPG?rlkey=edr0wep6sp31g7k10dwoub76s&st=yhl5i0lp&raw=1";
        const LOGO_CLOAQ = "https://www.dropbox.com/scl/fi/pzrib9x3r0ax34gpew0l9/Image-3.jpg?rlkey=lbyuuqoy42mehwnz658dzaxfo&st=u5atuetv&raw=1";
        const LOGO_BAF = "https://www.dropbox.com/scl/fi/7deqzj0fkqr4my6cgi9ik/Image-2.jpg?rlkey=szrgy5uqh14m7k8k3lvvu5fic&st=a6f8yfx0&raw=1";

        // --- MASTER CREATOR DATABASE ---
        const CREATORS = {
            'BAF_Network': { name: 'Black Awesomeness', role: 'Production Network', company: 'BAF', avatar: LOGO_BAF, bio: 'The Hub for Urban Cinema.', stats: {fans: '150k', series: '12', views: '2.5M'}, type: 'network', subPrice: '2.99', isFounding50: true, projects: [{ title: "The Best Burgers", type: "DOCU", img: IMG_BURGERS }, { title: "Windy City Love", type: "SERIES", img: IMG_HERO }, { title: "Race Hoes", type: "SERIES", img: IMG_TEXTURE }], roster: ['joshuaargue', 'joshuaroberts'] },
            'Alpha_Network': { name: 'Alpha Visual Artists', role: 'Production Network', company: 'AVA', avatar: LOGO_ALPHA, bio: 'Visual Storytelling House.', stats: {fans: '80k', series: '6', views: '1.2M'}, type: 'network', subPrice: '1.99', isFounding50: true, projects: [{ title: "Beyond the Bases", type: "SERIES", img: IMG_BASES }], roster: ['joshuaroberts'] },
            'Cloaq_Network': { name: 'CLOAQ Studios', role: 'Production Network', company: 'CLOAQ', avatar: LOGO_CLOAQ, bio: 'Unveiling the unseen.', stats: {fans: '45k', series: '3', views: '800k'}, type: 'network', subPrice: '2.99', isFounding50: true, projects: [{ title: "The Darkroom", type: "SERIES", img: IMG_TEXTURE }], roster: ['joeguridy'] },
            'joshuaargue': { name: 'Joshua Argue', role: 'Creator / Lead', company: 'Black Awesomeness', avatar: 'https://www.dropbox.com/scl/fi/vaudy76mhaqtcukpkzeve/JoshuaArgue.JPG?rlkey=is2eixyxhseij6jft5k91zm9k&st=0mp4lgv9&raw=1', bio: 'Showrunner. Creating @BestBurgers.', stats: {fans: '42.5k', series: '8'}, type: 'creator', isFounding50: true, projects: [{ title: "The Best Burgers", type: "DOCU", img: IMG_BURGERS }, { title: "Windy City Love", type: "SERIES", img: IMG_HERO }], products: [{title: "Showrunner Bible Template", price: "$49", sold: "1.2k"}, {title: "Indie Film Budget Sheet", price: "$19", sold: "850"}], bts: ["https://www.dropbox.com/scl/fi/tw514m8xn640ejllhdypx/GP6A3193.JPG?rlkey=1w6laqitmifmnojdufbm8ki7s&st=gufznqky&raw=1"], jobs: [ { title: "Editor (Davinci)", proj: "Best Burgers S2", rate: "$2,500 Flat", type: "Post-Prod" }, { title: "Sound Mixer", proj: "Windy City Love", rate: "$350/Day", type: "Production" } ] },
            'joshuaroberts': { name: 'J.R.R. Roberts', role: 'Founder', company: 'Vertikal', avatar: 'https://www.dropbox.com/scl/fi/v77iz4i895pqmlmzvqhsk/JoshuaRoberts.JPG?rlkey=4bag3kp7ud5y8w8ibi8s3lfa2&st=04hrxb2c&raw=1', bio: 'Building the Vertical Film Network.', stats: {fans: '28k', series: '4'}, type: 'creator', isFounding50: true, projects: [{ title: "Beyond the Bases", type: "SERIES", img: IMG_BASES }], products: [{title: "Cinematic LUTs Vol 1", price: "$25", sold: "2.4k"}, {title: "Director's Treatment Keynote", price: "$35", sold: "500"}], jobs: [ { title: "1st AC", proj: "Beyond the Bases", rate: "$400/Day", type: "Camera" }, { title: "Gaffer", proj: "Commercial Spec", rate: "$500/Day", type: "Lighting" } ] },
            'natehosseini': { name: 'Nate Hosseini', role: 'Cinematographer', company: 'Midwest Cinequip', avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Nate', bio: 'Camera Dept.', stats: {fans: '12k', series: '12'}, type: 'creator', projects: [{ title: "Lost in LA", type: "SERIES", img: IMG_NATURE }], isFounding50: true, jobs: [ { title: "Key Grip", proj: "Lost in LA", rate: "$450/Day", type: "Grip/Electric" }, { title: "Camera Utility", proj: "Music Video", rate: "$200/Day", type: "Camera" } ] },
             'kelmitchell': { name: 'Kel Mitchell', role: 'Founding Ambassador', company: 'Vertikal', avatar: 'https://www.dropbox.com/scl/fi/ipg6ev6ku0ylgr2jnjg46/Image.jpg?rlkey=lcebirpcgnbtlduq2zncxotfq&st=zm8l3hfq&raw=1', bio: 'Talent/EP. Vertikal Original: The Lab.', stats: {fans: '1.2M', series: '1'}, type: 'creator', isFounding50: true, projects: [{ title: "The Lab", type: "ORIGINAL", img: IMG_HERO }] },
             'joeguridy': { name: 'Joe Guridy', role: 'Producer', company: 'Cloaq Productions', avatar: 'https://www.dropbox.com/scl/fi/dgf6xyzfvq5hl2kj093cq/Image-1.jpg?rlkey=c2por9s72xsafnng0dp9azex5&st=qgogul20&raw=1', bio: 'Production Management.', stats: {fans: '3k', series: '1'}, projects: [{title: "The Darkroom", type: "SERIES", img: IMG_TEXTURE}], type: 'creator', isFounding50: true, jobs: [{ title: "Location Scout", proj: "The Darkroom", rate: "Negotiable", type: "Pre-Prod" }] },
             // ... other creators omitted for brevity but assumed present
        };

        const getAllProjects = () => {
            let all = [];
            Object.values(CREATORS).forEach(creator => {
                if (creator.projects && creator.projects.length > 0) {
                    creator.projects.forEach(p => { all.push({ ...p, creatorName: creator.name, creatorAvatar: creator.avatar }); });
                }
            });
            return all.sort(() => 0.5 - Math.random());
        };

        const MOCK_CHATS = [
            { id: 1, userId: 'natehosseini', lastMsg: "Sent over the lens kit list üé•", time: "2m", unread: true },
            { id: 2, userId: 'kelmitchell', lastMsg: "Love the new cut of Ep 3!", time: "1h", unread: false },
            { id: 3, userId: 'BAF_Network', lastMsg: "Contract for Season 2 attached.", time: "1d", unread: false }
        ];

        // --- COMPONENTS ---
        
        const FoundingBadge = () => (
             <div className="absolute -bottom-3 left-1/2 transform -translate-x-1/2 bg-slate-900 border border-slate-500/50 text-white text-[9px] font-black px-3 py-1 rounded-full flex items-center gap-1 shadow-lg shadow-gray-700/50 z-20 whitespace-nowrap overflow-hidden">
                <svg width="10" height="10" viewBox="0 0 100 100" fill="none" stroke="white" strokeWidth="15" strokeLinecap="round" strokeLinejoin="round" className="mr-0.5"><path d="M25 40 L50 65 L75 25" /><path d="M75 25 L 55 25" /></svg>
                <span className="animate-shine">FOUNDING 50</span>
            </div>
        );

        // VIBE Presets
        window.VIBE_PRESETS = window.VIBE_PRESETS || {};
        window.VIBE_PRESETS["vibe_argueably_best_burgers_v1"] = [
            { t: 2.5, u: "AVA_Member", m: "This intro is CRAZY üî•" },
            { t: 6.0, u: "Founder50", m: "Vertical cinema is rotating. Not dying." },
            { t: 9.2, u: "BlackAwe", m: "Argue don't miss üé¨" },
            { t: 13.0, u: "KelFan", m: "That pacing is clean üòÆ‚Äçüí®" },
            { t: 18.5, u: "Showrunner", m: "This looks premium." },
            { t: 25.0, u: "Network", m: "We need Episode 1 ASAP." },
            { t: 33.0, u: "Creator", m: "The vibe overlay is the sauce." },
            { t: 45.0, u: "Viewer", m: "Okay‚Ä¶ I'm locked in." }
        ];

        const DanmakuOverlay = ({ active, vibeThreadId }) => {
            if (!active) return null;
            
            // Use preset if vibeThreadId is provided
            let comments = [];
            if (vibeThreadId && window.VIBE_PRESETS && window.VIBE_PRESETS[vibeThreadId]) {
                const preset = window.VIBE_PRESETS[vibeThreadId];
                comments = preset.map((p, i) => ({
                    text: `${p.u}: ${p.m}`,
                    top: `${10 + (i * 12)}%`,
                    duration: '10s',
                    delay: `${p.t}s`
                }));
            } else {
                // Default comments
                comments = [
                    { text: "This lighting is insane üî•", top: "10%", duration: "8s", delay: "0s" },
                    { text: "Wait for the drop...", top: "20%", duration: "12s", delay: "1s" },
                    { text: "Chicago represent! üèôÔ∏è", top: "35%", duration: "7s", delay: "2s" }
                ];
            }
            
            return ( 
                <div className="absolute inset-0 z-40 pointer-events-none overflow-hidden"> 
                    {comments.map((c, i) => ( 
                        <div 
                            key={i} 
                            className="animate-danmaku text-white text-sm font-bold bg-black/70 backdrop-blur-md px-4 py-2 rounded-full border-2 border-yellow-500/50 shadow-lg shadow-yellow-500/30" 
                            style={{ 
                                top: c.top, 
                                animationDuration: c.duration,
                                animationDelay: c.delay,
                                left: '-100%'
                            }}
                        >
                            {c.text}
                        </div>
                    ))} 
                </div> 
            );
        };

        const Header = ({ onOpenInbox }) => (
            <div className="flex justify-between items-center px-4 py-4 sticky top-0 z-50 bg-black/80 backdrop-blur-md border-b border-white/5">
                <div className="flex items-center gap-2"><div className="w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center"><svg width="20" height="20" viewBox="0 0 100 100" fill="none" stroke="white" strokeWidth="12" strokeLinecap="round" strokeLinejoin="round"><path d="M25 40 L50 65 L75 25" /><path d="M75 25 L 55 25" /><path d="M75 25 L 75 45" /></svg></div><span className="font-black text-xl tracking-tighter">VERTIKAL</span></div>
                <div className="flex items-center gap-3">
                    <div className="flex items-center gap-2 bg-[#1A1A1A] border border-[#333] rounded-full px-3 py-1"><div className="w-4 h-4 bg-yellow-500 rounded-full flex items-center justify-center text-[10px] text-black font-bold">$</div><span className="text-yellow-500 font-bold text-sm">150</span></div>
                    <button onClick={onOpenInbox} className="relative active:scale-95 transition-transform" onClick={() => triggerHaptic('light')}>
                        <i data-lucide="message-square" className="w-6 h-6 text-white"></i>
                        <div className="absolute -top-1 -right-1 w-3 h-3 bg-red-600 rounded-full border border-black"></div>
                    </button>
                </div>
            </div>
        );

        const BottomNav = ({ activeTab, setTab, myProfileId }) => {
            const navItems = [ { id: 'home', label: 'HOME', icon: 'home' }, { id: 'series', label: 'SERIES', icon: 'tv' }, { id: 'shorts', label: 'SHORTS', icon: 'smartphone' }, { id: 'trailers', label: 'TRAILERS', icon: 'clapperboard' }, { id: 'profile', label: '', icon: 'user', isAvatar: true } ];
            return ( <div className="h-20 bg-black border-t border-gray-900 flex justify-around items-center pb-4 absolute bottom-0 w-full z-50"> {navItems.map(item => ( <button key={item.id} onClick={() => { setTab(item.id); triggerHaptic('medium'); }} className="flex flex-col items-center gap-1 w-16 active:scale-90 transition-transform"> {item.isAvatar ? ( <img src={CREATORS[myProfileId].avatar} className={`w-6 h-6 rounded-full border-2 ${activeTab === item.id ? 'border-white' : 'border-transparent opacity-50'} object-cover`} /> ) : ( <i data-lucide={item.icon} className={`w-6 h-6 ${activeTab === item.id ? 'text-blue-500' : 'text-gray-500'}`}></i> )} {item.label && <span className={`text-[10px] font-bold ${activeTab === item.id ? 'text-blue-500' : 'text-gray-600'}`}>{item.label}</span>} </button> ))} </div> );
        };

        const SubscriptionModal = ({ creator, onClose }) => (
            <div className="fixed inset-0 z-[60] bg-black/90 backdrop-blur-sm flex items-end sm:items-center justify-center animate-fade">
                <div className="w-full max-w-md bg-[#111] rounded-t-3xl sm:rounded-3xl border border-gray-800 p-6 animate-spring-up">
                    <div className="flex justify-between items-center mb-6"><h2 className="text-xl font-bold">Subscribe to {creator.company}</h2><button onClick={onClose}><i data-lucide="x" className="w-6 h-6 text-gray-500"></i></button></div>
                    <div className="bg-yellow-500/10 border border-yellow-500/30 rounded-xl p-4 mb-6 flex gap-4 items-center"><div className="w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center text-black font-black text-lg">V+</div><div><div className="font-bold text-yellow-400">Network Pass</div><div className="text-xs text-gray-400">Access all {creator.stats.series} Series</div></div></div>
                    <button className="w-full bg-yellow-500 text-black font-black py-4 rounded-xl text-lg hover:bg-yellow-400 transition active:scale-95" onClick={() => triggerHaptic('heavy')}>Pay ${creator.subPrice}/mo</button>
                    <p className="text-center text-[10px] text-gray-600 mt-4">Cancel anytime.</p>
                </div>
            </div>
        );

        const InboxView = ({ onClose, onOpenChat }) => (
            <div className="fixed inset-0 z-[60] bg-black animate-fade flex flex-col">
                <div className="h-14 flex items-center gap-4 px-4 border-b border-gray-800">
                    <button onClick={onClose}><i data-lucide="chevron-left" className="text-white w-6 h-6"></i></button>
                    <span className="font-bold text-lg">Direct Messages</span>
                </div>
                <div className="flex-1 overflow-y-auto p-4 space-y-4">
                    {MOCK_CHATS.map(chat => {
                        const user = CREATORS[chat.userId] || {name: 'User', avatar: ''};
                        return (
                            <div key={chat.id} onClick={() => onOpenChat(chat.userId)} className="flex items-center gap-4 p-2 active:bg-gray-900 rounded-lg transition active:scale-95">
                                <div className="relative">
                                    <img src={user.avatar} className="w-12 h-12 rounded-full object-cover" />
                                    {chat.unread && <div className="absolute top-0 right-0 w-3 h-3 bg-blue-500 rounded-full border border-black"></div>}
                                </div>
                                <div className="flex-1 border-b border-gray-800 pb-3">
                                    <div className="flex justify-between mb-1">
                                        <span className="font-bold text-sm">{user.name}</span>
                                        <span className="text-xs text-gray-500">{chat.time}</span>
                                    </div>
                                    <p className={`text-sm truncate ${chat.unread ? 'text-white font-bold' : 'text-gray-400'}`}>{chat.lastMsg}</p>
                                </div>
                            </div>
                        );
                    })}
                </div>
            </div>
        );

        const ChatView = ({ userId, onClose }) => {
            const user = CREATORS[userId] || {name: 'User', avatar: ''};
            return (
                <div className="fixed inset-0 z-[70] bg-black animate-fade flex flex-col">
                    <div className="h-16 flex items-center gap-3 px-4 border-b border-gray-800 bg-gray-900/50 backdrop-blur">
                        <button onClick={onClose}><i data-lucide="chevron-left" className="text-white w-6 h-6"></i></button>
                        <img src={user.avatar} className="w-8 h-8 rounded-full object-cover" />
                        <span className="font-bold text-sm">{user.name}</span>
                        <div className="ml-auto text-blue-500"><i data-lucide="phone" className="w-5 h-5"></i></div>
                    </div>
                    <div className="flex-1 p-4 overflow-y-auto space-y-4">
                        <div className="flex justify-start"><div className="bg-gray-800 p-3 rounded-2xl rounded-tl-none max-w-[80%] text-sm text-gray-200 animate-pop">Hey! Saw the new posting.</div></div>
                        <div className="flex justify-end"><div className="bg-blue-600 p-3 rounded-2xl rounded-tr-none max-w-[80%] text-sm text-white animate-pop">Yeah! Are you available next week?</div></div>
                    </div>
                    <div className="p-3 border-t border-gray-800 flex gap-2 items-center bg-black pb-8">
                        <button className="text-gray-500"><i data-lucide="plus-circle" className="w-6 h-6"></i></button>
                        <input type="text" placeholder="Message..." className="flex-1 bg-gray-900 rounded-full px-4 py-2 text-sm text-white focus:outline-none focus:ring-1 focus:ring-blue-500" />
                        <button className="text-blue-500 font-bold p-2"><i data-lucide="send" className="w-5 h-5"></i></button>
                    </div>
                </div>
            );
        };

        // --- STUDIO TAB (AI Features) ---
        const StudioTab = () => {
            const [tool, setTool] = useState('reshaper');
            const [script, setScript] = useState('');
            const [result, setResult] = useState(null);
            const [loading, setLoading] = useState(false);

            const tools = [
                { id: 'reshaper', label: 'Reshaper', icon: <i data-lucide="wand-2" className="w-4 h-4" />, desc: 'Horizontal to Vertical' },
                { id: 'viral', label: 'Viral Engine', icon: <span className="text-lg">üî•</span>, desc: 'Captions & Tags' },
                { id: 'bible', label: 'Series Bible', icon: <span className="text-lg">üìñ</span>, desc: 'Concept to Show' },
                { id: 'pitch', label: 'Pitch Deck ‚ú®', icon: <span className="text-lg">üíº</span>, desc: 'Investor Slides' },
                { id: 'dialogue', label: 'Dialogue Fix ‚ú®', icon: <span className="text-lg">üí¨</span>, desc: 'Punch Up Scripts' },
                // NEW: Scene Writer (Script Gen)
                { id: 'scene', label: 'Scene Gen ‚ú®', icon: <span className="text-lg">üé¨</span>, desc: 'Full Script Writer' },
                // NEW: Marketing (Launch Plan)
                { id: 'marketing', label: 'Launch Plan ‚ú®', icon: <span className="text-lg">üöÄ</span>, desc: 'Go-To-Market' }
            ];

            const generate = async () => {
                if(!script) return;
                setLoading(true);
                setResult(null);
                
                const apiKey = ""; // API Key
                const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
                
                let prompt = "";
                // Define prompts for all tools
                if (tool === 'reshaper') prompt = `Repurpose horizontal script for vertical video. JSON {hook, shot_list}. Input: "${script}"`;
                else if (tool === 'viral') prompt = `3 viral captions. JSON {option1, option2, option3}. Input: "${script}"`;
                else if (tool === 'bible') prompt = `Vertical drama bible. JSON {title, logline, characters: [{name, role}], episodes: [{ep: 1, plot}]}. Input: "${script}"`;
                else if (tool === 'pitch') prompt = `5-slide investor pitch. JSON { slides: [{title, bullet_points: []}] }. Input: "${script}"`;
                else if (tool === 'dialogue') prompt = `Rewrite dialogue for vertical video (fast). JSON { original_analysis, rewritten_script, virality_score }. Input: "${script}"`;
                else if (tool === 'scene') prompt = `Write a 1-minute vertical drama scene script. JSON { title, characters: [], script_body: [{speaker, line, action}] }. Input: "${script}"`;
                else if (tool === 'marketing') prompt = `Create a marketing launch plan. JSON { tagline, social_hooks: [], pr_angle, timeline: [{day, action}] }. Input: "${script}"`;

                try {
                    const res = await fetch(url, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }], generationConfig: { responseMimeType: "application/json" } }) });
                    const data = await res.json();
                    setResult(JSON.parse(data.candidates[0].content.parts[0].text));
                } catch(e) {
                    // Fallbacks
                    if (tool === 'scene') setResult({ title: "The Confrontation", characters: ["Jax", "Vera"], script_body: [{speaker: "Jax", line: "I told you not to come here.", action: "Looks over shoulder"}, {speaker: "Vera", line: "You didn't leave me a choice.", action: "Steps closer"}] });
                    if (tool === 'marketing') setResult({ tagline: "Silence is a weapon.", social_hooks: ["#Thriller", "#VertikalOriginal"], timeline: [{day: "Day 1", action: "Teaser Drop"}, {day: "Day 3", action: "Cast Reveal"}] });
                }
                setLoading(false);
            };

            return (
                <div className="h-full bg-gray-950 p-6 flex flex-col pt-16 overflow-y-auto pb-24">
                    <h2 className="text-3xl font-black mb-6">Creator Studio</h2>
                    <div className="flex gap-2 mb-6 overflow-x-auto no-scrollbar pb-2">
                        {tools.map(t => (
                            <button key={t.id} onClick={() => { setTool(t.id); setResult(null); triggerHaptic('light'); }} className={`flex items-center gap-2 px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap transition-all border ${tool === t.id ? 'bg-white text-black border-white' : 'bg-gray-900 text-gray-500 border-gray-800'}`}>
                                {t.icon} {t.label}
                            </button>
                        ))}
                    </div>

                    <div className="bg-gray-900 rounded-xl p-6 border border-gray-800 flex flex-col">
                        <div className="flex items-center gap-2 mb-2 text-purple-400">
                            {tools.find(t => t.id === tool).icon}
                            <span className="font-bold uppercase text-xs tracking-widest">{tools.find(t => t.id === tool).desc}</span>
                        </div>
                        <textarea className="w-full bg-black/50 rounded-lg p-4 text-sm text-white resize-none border border-gray-700 focus:border-purple-500 outline-none h-32 mb-4" placeholder="Enter script or concept..." value={script} onChange={e => setScript(e.target.value)} />
                        <button onClick={generate} disabled={loading} className="w-full brand-gradient py-4 rounded-lg font-bold text-white shadow-lg shadow-purple-900/40 relative overflow-hidden active:scale-95 transition-transform">
                            {loading ? "Generating..." : "Generate with Gemini ‚ú®"}
                        </button>
                    </div>

                    {result && (
                        <div className="mt-6 glass-panel p-6 rounded-xl animate-spring-up border-l-4 border-purple-500">
                             {/* Result Rendering Logic */}
                             {tool === 'reshaper' && (<><div className="mb-4"><span className="text-xs font-bold text-gray-500 uppercase">Hook</span><p className="text-lg font-bold">{result.hook}</p></div><div><span className="text-xs font-bold text-gray-500 uppercase">Shot List</span><p className="text-sm text-gray-300 whitespace-pre-wrap">{result.shot_list}</p></div></>)}
                             {tool === 'scene' && (<div className="space-y-4"><h3 className="font-bold text-xl">{result.title}</h3><div className="space-y-2">{result.script_body?.map((line, i) => <div key={i} className="text-sm"><span className="text-blue-400 font-bold">{line.speaker}:</span> <span className="text-white">{line.line}</span> <span className="text-gray-500 italic">({line.action})</span></div>)}</div></div>)}
                             {tool === 'marketing' && (<div className="space-y-4"><h3 className="font-bold text-xl">Strategy: {result.tagline}</h3><div className="flex gap-2">{result.social_hooks?.map(h => <span className="bg-blue-900/50 px-2 py-1 rounded text-xs">{h}</span>)}</div></div>)}
                             {/* ... other tools ... */}
                        </div>
                    )}
                </div>
            );
        };

        // --- OTHER TABS (Simulated) ---
        const SeriesTab = () => (<div className="p-10 text-center text-gray-500">Series Tab Content</div>);
        const ShortsTab = () => (<div className="p-10 text-center text-gray-500">Shorts Tab Content</div>);
        const TrailersTab = () => (<div className="p-10 text-center text-gray-500">Trailers Tab Content</div>);
        const CinemaTab = () => (<div className="p-10 text-center text-gray-500">Cinema Hub</div>);

        // --- HOME TAB (Corrected) ---
        const HomeTab = ({ onViewProfile }) => {
            const [danmakuOn, setDanmakuOn] = useState(true);
            const [filter, setFilter] = useState('For You');
            const allProjects = getAllProjects();
            const displayCreators = filter === 'Networks' ? Object.entries(CREATORS).filter(([k,v]) => v.type === 'network') : Object.entries(CREATORS).filter(([k,v]) => v.type === 'creator');

            return (
                <div className="pb-24 animate-fade overflow-y-auto h-full no-scrollbar relative">
                    <!-- FEATURED HERO: ARGUEably the Best Burgers (Joshua Argue) -->
                    <div className="relative h-[500px] w-full cursor-pointer gpu-accelerated hero-video" data-vibe="true" data-vibe-thread="vibe_argueably_best_burgers_v1" onClick={() => { setDanmakuOn(!danmakuOn); triggerHaptic('light'); }}>
                        <div className="absolute inset-0">
                            <iframe
                                src="https://customer-fyh68ijrcuys7ag8.cloudflarestream.com/9d3d0efed36b71e5f75c7b5e218809d7/iframe"
                                style={{border:0,width:'100%',height:'100%',aspectRatio:'9/16',borderRadius:'18px',overflow:'hidden'}}
                                allow="accelerometer; gyroscope; autoplay; encrypted-media; picture-in-picture;"
                                allowFullScreen={true}
                            />
                            <div className="absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent pointer-events-none"></div>
                        </div>
                        <DanmakuOverlay active={danmakuOn} vibeThreadId="vibe_argueably_best_burgers_v1" />
                        <div className="absolute top-4 right-4 z-30"><button onClick={(e) => { e.stopPropagation(); setDanmakuOn(!danmakuOn); triggerHaptic('medium'); }} className={`px-4 py-1.5 text-[10px] font-black tracking-widest rounded-full border backdrop-blur-md transition-all ${danmakuOn ? 'bg-gradient-to-r from-purple-600 to-blue-600 border-transparent text-white animate-hype shadow-lg shadow-purple-500/50' : 'bg-black/40 border-white/20 text-gray-400'}`}>VIBE {danmakuOn ? 'ON' : 'OFF'}</button></div>
                        <div className="absolute bottom-0 w-full p-4 flex flex-col items-center z-30">
                            <div className="flex gap-2 overflow-x-auto no-scrollbar w-full justify-center mb-6 z-40">{['For You', 'Networks', 'Drama', 'Docu'].map((g, i) => ( <button key={g} onClick={(e) => { e.stopPropagation(); setFilter(g); triggerHaptic('light'); }} className={`whitespace-nowrap px-4 py-1.5 rounded-full text-xs font-bold transition-all ${filter === g ? 'bg-white text-black' : 'bg-white/10 backdrop-blur text-white'}`}>{g}</button> ))}</div>
                            <div className="flex flex-col items-center mb-6"><span className="text-blue-500 font-black tracking-widest text-[10px] mb-2 block animate-pulse border border-blue-500/50 px-2 py-0.5 rounded bg-blue-900/20">‚òÖ FEATURED PREMIERE</span><h1 className="text-5xl font-black text-white mb-2 leading-none text-center drop-shadow-2xl italic tracking-tighter">ARGUEABLY THE BEST BURGERS</h1><div className="flex gap-2"><span className="bg-green-500/20 text-green-400 text-xs font-bold px-2 py-1 rounded">98% Match</span><span className="bg-blue-600/20 text-blue-400 text-xs font-bold px-2 py-1 rounded">Food Docu</span></div></div>
                            <div className="flex gap-3 w-full max-w-xs mb-8"><button className="flex-1 bg-white text-black font-bold py-3 rounded flex items-center justify-center gap-2 active:scale-95 transition-transform" onClick={() => triggerHaptic('heavy')}><i data-lucide="play" className="fill-black w-4 h-4"></i> PLAY</button><button className="w-12 bg-gray-800/80 text-white rounded flex items-center justify-center active:scale-95 transition-transform"><i data-lucide="plus" className="w-6 h-6"></i></button></div>
                            <div className="flex gap-4 w-full overflow-x-auto no-scrollbar justify-start px-2"><div className="flex flex-col items-center gap-1 min-w-[64px]"><div className="w-16 h-16 rounded-full border-2 border-dashed border-gray-600 flex items-center justify-center relative active:scale-90 transition-transform"><i data-lucide="plus" className="text-gray-400"></i></div><span className="text-xs text-gray-400">Add</span></div>{displayCreators.slice(0, 10).map(([key, creator]) => (<div key={key} className="flex flex-col items-center gap-1 cursor-pointer min-w-[64px]" onClick={(e) => { e.stopPropagation(); onViewProfile(key); triggerHaptic('light'); }}><div className={`w-16 h-16 rounded-full border-2 p-0.5 overflow-hidden active:scale-90 transition-transform ${creator.type === 'network' ? 'border-yellow-500' : 'border-purple-500'}`}><img src={creator.avatar} className="w-full h-full rounded-full object-cover bg-black" /></div><span className="text-xs font-bold truncate w-16 text-center">{creator.name.split(' ')[0]}</span></div>))}</div>
                        </div>
                    </div>
                    <div className="mt-8 px-4"><div className="flex justify-between items-center mb-3"><h2 className="text-lg font-bold">Continue Watching</h2><i data-lucide="chevron-right" className="w-4 h-4 text-gray-500"></i></div><div className="flex gap-4 overflow-x-auto no-scrollbar"><div className="min-w-[160px]"><div className="h-24 w-full relative rounded-lg overflow-hidden mb-2"><img src={IMG_HERO} className="w-full h-full object-cover" /><div className="absolute inset-0 flex items-center justify-center bg-black/30"><i data-lucide="play" className="fill-white text-white w-8 h-8"></i></div><div className="absolute bottom-0 w-full h-1 bg-gray-700"><div className="w-3/4 h-full bg-red-600"></div></div></div><h3 className="text-xs font-bold">The Last Echo</h3><p className="text-[10px] text-gray-500">S1:E3 ‚Ä¢ 12m left</p></div><div className="min-w-[160px]"><div className="h-24 w-full bg-slate-800 relative rounded-lg overflow-hidden mb-2 flex items-center justify-center"><img src={IMG_NATURE} className="w-full h-full object-cover opacity-60" /><div className="absolute inset-0 flex items-center justify-center bg-black/30"><i data-lucide="play" className="fill-white text-white w-8 h-8"></i></div><div className="absolute bottom-0 w-full h-1 bg-gray-700"><div className="w-1/4 h-full bg-red-600"></div></div></div><h3 className="text-xs font-bold">Midnight Run</h3><p className="text-[10px] text-gray-500">S1:E3 ‚Ä¢ 12m left</p></div></div></div>
                    <div className="mt-8 px-4 mb-20"><h2 className="text-lg font-bold mb-3">Director Originals</h2><div className="flex gap-3 overflow-x-auto no-scrollbar">{allProjects.map((project, i) => (<div key={i} className="min-w-[128px] h-48 rounded-lg overflow-hidden relative group border border-white/10 active:scale-95 transition-transform"><img src={project.img} className="w-full h-full object-cover" /><div className="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent flex flex-col justify-end p-2"><p className="text-[10px] font-bold leading-tight">{project.title}</p><p className="text-[8px] text-gray-300 truncate">{project.creatorName}</p></div><div className="absolute top-2 right-2 bg-black/60 px-1.5 py-0.5 rounded text-[8px] font-bold uppercase tracking-wide">{project.type}</div></div>))}</div></div>
                </div>
            );
        };

        // TAB 5: PROFILE
        const ProfileTab = ({ creatorId, onBack, onOpenChat }) => {
            const [side, setSide] = useState('projects'); 
            const [showSubModal, setShowSubModal] = useState(false);
            const creator = CREATORS[creatorId] || CREATORS['joshuaargue']; 
            const isNetwork = creator.type === 'network';

            return (
                <div className="pb-24 animate-spring-up h-full overflow-y-auto no-scrollbar bg-black absolute inset-0 z-40">
                    {showSubModal && <SubscriptionModal creator={creator} onClose={() => setShowSubModal(false)} />}
                    {onBack && (<button onClick={onBack} className="absolute top-4 left-4 z-50 bg-black/50 p-2 rounded-full backdrop-blur active:scale-90 transition-transform"><i data-lucide="chevron-left" className="text-white"></i></button>)}
                    
                    <div className="flex flex-col items-center pt-8 pb-6 px-4">
                        <div className="relative mb-4">
                            <div className={`w-24 h-24 rounded-full p-1 ${isNetwork ? 'gold-gradient' : 'brand-gradient'}`}><img src={creator.avatar} className="w-full h-full rounded-full bg-black object-cover" /></div>
                            {creator.isFounding50 && !isNetwork && <FoundingBadge />}
                            {isNetwork && <div className="absolute -bottom-2 bg-yellow-500 text-black text-[8px] font-black px-2 py-0.5 rounded-full border-2 border-black">NETWORK</div>}
                        </div>
                        <div className="flex items-center gap-1 mb-1 mt-3"><h1 className="text-2xl font-bold">{creator.name}</h1><i data-lucide="check-circle" className={`w-4 h-4 ${isNetwork ? 'text-yellow-500' : 'text-blue-500'}`}></i></div>
                        <div className="flex items-center gap-2 text-gray-400 text-sm mb-2"><i data-lucide={isNetwork ? "globe" : "clapperboard"} className="w-3 h-3"></i><span>{creator.role}</span></div>
                        <p className="text-sm text-gray-300 text-center max-w-xs mb-6">{creator.bio}</p>
                        <div className="flex justify-around w-full max-w-sm mb-6 border-y border-gray-800 py-4"><div className="text-center"><div className="text-xl font-black">{creator.stats.fans}</div><div className="text-[10px] text-gray-500 tracking-widest uppercase">{isNetwork ? 'Subscribers' : 'Fans'}</div></div><div className="text-center"><div className="text-xl font-black">{creator.stats.series}</div><div className="text-[10px] text-gray-500 tracking-widest uppercase">Series</div></div><div className="text-center"><div className={`text-xl font-black ${isNetwork ? 'text-yellow-500' : 'text-blue-500'}`}>{creator.stats.views || '500+'}</div><div className="text-[10px] text-gray-500 tracking-widest uppercase">{isNetwork ? 'Views' : 'Connections'}</div></div></div>
                        <div className="flex gap-3 w-full mb-8">{isNetwork ? (<button onClick={() => setShowSubModal(true)} className="flex-1 bg-yellow-500 hover:bg-yellow-400 text-black font-black py-3 rounded-lg flex items-center justify-center gap-2 active:scale-95 transition-transform" onClick={() => triggerHaptic('heavy')}>SUBSCRIBE ${creator.subPrice}</button>) : (<button className="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 active:scale-95 transition-transform" onClick={() => triggerHaptic('medium')}><i data-lucide="user-plus" className="w-4 h-4"></i> Follow</button>)}<button onClick={() => onOpenChat(creatorId)} className="flex-1 bg-[#1A1A1A] border border-gray-700 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 active:scale-95 transition-transform" onClick={() => triggerHaptic('light')}>Message <span className="text-[10px] opacity-50 ml-1">/ Tip</span></button></div>
                        <div className="flex w-full justify-between px-8 text-xs font-bold text-gray-500 uppercase tracking-widest mb-4"><button onClick={() => {setSide('projects'); triggerHaptic('light');}} className={`pb-2 border-b-2 transition ${side === 'projects' ? 'text-white border-white' : 'border-transparent'}`}>{isNetwork ? 'Catalogue' : 'Projects'}</button>{!isNetwork && <button onClick={() => {setSide('shop'); triggerHaptic('light');}} className={`pb-2 border-b-2 transition ${side === 'shop' ? 'text-white border-white' : 'border-transparent'}`}>Shop</button>}<button onClick={() => {setSide('crew'); triggerHaptic('light');}} className={`pb-2 border-b-2 transition ${side === 'crew' ? 'text-white border-white' : 'border-transparent'}`}>{isNetwork ? 'Roster' : 'Crew Openings'}</button><button onClick={() => {setSide('bts'); triggerHaptic('light');}} className={`pb-2 border-b-2 transition ${side === 'bts' ? 'text-white border-white' : 'border-transparent'}`}>BTS</button></div>
                        
                        {/* CONTENT */}
                        {side === 'projects' && (<div className="grid grid-cols-3 gap-1 w-full animate-pop">{creator.projects && creator.projects.length > 0 ? (creator.projects.map((proj, i) => (<div key={i} className="aspect-[2/3] relative bg-slate-900 group overflow-hidden"><img src={proj.img} className="w-full h-full object-cover opacity-80 group-hover:opacity-100 transition" /><div className="absolute bottom-0 left-0 right-0 p-1 bg-gradient-to-t from-black to-transparent"><span className="text-[8px] bg-white/20 px-1 rounded backdrop-blur text-white font-bold">{proj.type}</span><p className="text-[10px] font-bold leading-tight truncate">{proj.title}</p></div></div>))) : (<div className="col-span-3 text-center py-10 text-gray-600 text-xs">No projects listed yet.</div>)}</div>)}
                        
                        {side === 'shop' && (<div className="w-full grid grid-cols-2 gap-3 animate-pop">{creator.products?.map((prod, i) => (<div key={i} className="bg-gray-900 rounded-xl p-3 border border-gray-800"><div className="aspect-square bg-gray-800 rounded-lg mb-2 flex items-center justify-center"><i data-lucide="shopping-bag" className="text-gray-600"></i></div><h4 className="font-bold text-sm leading-tight mb-1">{prod.title}</h4><div className="flex justify-between items-center"><span className="text-green-400 font-bold">{prod.price}</span><span className="text-[10px] text-gray-500">{prod.sold} sold</span></div></div>))}{!creator.products && <div className="col-span-2 text-center py-8 text-gray-500 text-xs">Store empty.</div>}</div>)}
                        
                        {side === 'crew' && (<div className="w-full space-y-3 px-1 text-center py-10 text-gray-500 text-xs animate-pop">{isNetwork ? (<div className="grid grid-cols-4 gap-4">{creator.roster?.map((id) => (<div key={id} className="flex flex-col items-center"><img src={CREATORS[id]?.avatar} className="w-12 h-12 rounded-full mb-1 object-cover" /><span className="text-[9px] text-white">{CREATORS[id]?.name.split(' ')[0]}</span></div>))}</div>) : creator.jobs && creator.jobs.length > 0 ? (creator.jobs.map((job, i) => (<div key={i} className="glass-panel p-4 rounded-xl border-l-4 border-green-500 text-left"><div className="flex justify-between mb-2"><span className="text-green-400 font-bold text-xs bg-green-900/30 px-2 py-1 rounded">OPEN ROLE</span><span className="text-[10px] text-gray-500">{job.type}</span></div><h4 className="font-bold text-white text-sm">{job.title}</h4><p className="text-xs text-gray-400 mt-1">{job.proj}</p><div className="flex justify-between items-center border-t border-gray-700 pt-2 mt-2"><span className="font-mono font-bold text-white text-xs">{job.rate}</span><button className="bg-white text-black px-3 py-1 rounded text-xs font-bold active:scale-95 transition-transform" onClick={() => triggerHaptic('medium')}>Apply</button></div></div>))) : ("No active job listings.")}</div>)}
                        
                        {side === 'bts' && (<div className="w-full columns-2 gap-2 px-1 space-y-2 animate-pop">{creator.bts && creator.bts.length > 0 ? (creator.bts.map((img, i) => <div key={i} className="break-inside-avoid mb-2"><img src={img} className="w-full rounded-lg bg-gray-800" /></div>)) : (<div className="text-center py-10 text-gray-500 text-xs w-full col-span-2">No BTS content uploaded yet.</div>)}</div>)}
                    </div>
                </div>
            );
        };

        const App = () => {
            const [tab, setTab] = useState('home');
            const [viewingProfile, setViewingProfile] = useState(null); 
            const [showInbox, setShowInbox] = useState(false);
            const [activeChat, setActiveChat] = useState(null);

            useEffect(() => { lucide.createIcons(); }, [tab, viewingProfile, showInbox, activeChat]);

            return (<div className="h-screen w-full flex flex-col bg-black max-w-md mx-auto relative shadow-2xl overflow-hidden border-x border-gray-800"><Header onOpenInbox={() => { setShowInbox(true); triggerHaptic('medium'); }} /><div className="flex-1 overflow-hidden relative app-gradient">{tab === 'home' && <HomeTab onViewProfile={(id) => { setViewingProfile(id); triggerHaptic('light'); }} />}{tab === 'series' && <SeriesTab />}{tab === 'shorts' && <ShortsTab />}{tab === 'trailers' && <TrailersTab />}{tab === 'cinema' && <CinemaTab />}{tab === 'profile' && <ProfileTab creatorId="joshuaargue" onOpenChat={(id) => { setActiveChat(id); triggerHaptic('medium'); }} />}{tab === 'studio' && <StudioTab />}{viewingProfile && <ProfileTab creatorId={viewingProfile} onBack={() => setViewingProfile(null)} onOpenChat={(id) => setActiveChat(id)} />}</div><BottomNav activeTab={tab} setTab={setTab} myProfileId="joshuaargue" />{showInbox && <InboxView onClose={() => setShowInbox(false)} onOpenChat={(id) => setActiveChat(id)} />}{activeChat && <ChatView userId={activeChat} onClose={() => setActiveChat(null)} />}</div>);
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
